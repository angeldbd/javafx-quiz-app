<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="rootPane"
            maxHeight="-Infinity" maxWidth="-Infinity" 
            minHeight="-Infinity" minWidth="-Infinity" 
            prefHeight="720.0" prefWidth="890.0" 
            styleClass="container-main"
            stylesheets="@../css/JavaQuiz.css"
            xmlns="http://javafx.com/javafx/24.0.1" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="org.openjfx.javaquiz.controller.QuizController">
   
   <children>
      <!-- Contenedor principal -->
      <VBox spacing="20" AnchorPane.topAnchor="24" AnchorPane.bottomAnchor="24" 
            AnchorPane.leftAnchor="24" AnchorPane.rightAnchor="24">
         
         <!-- Header: Timer + Botones superiores -->
         <HBox alignment="CENTER_LEFT" spacing="16">
            <padding>
               <Insets bottom="8"/>
            </padding>
            
            <!-- Timer -->
            <HBox spacing="12" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
               <Label fx:id="timerLabel" 
                      text="⏱ Tiempo: 12" 
                      style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #5B4FFF;">
                  <font>
                     <Font size="18" />
                  </font>
               </Label>
               
               <ProgressBar fx:id="timeBar" 
                           prefWidth="200.0" 
                           progress="1.0"
                           style="-fx-accent: #5B4FFF;"/>
            </HBox>
            
            <!-- Botones superiores -->
            <HBox spacing="8" alignment="CENTER_RIGHT">
               <Button fx:id="codeBtn" 
                       text="Ver Código" 
                       styleClass="btn-nav"
                       visible="false"
                       mnemonicParsing="false" 
                       onAction="#showCodeWindow"/>
               
               <Button fx:id="shuffleBtn" 
                       text="🔀 Mezclar" 
                       styleClass="btn-nav"
                       mnemonicParsing="false"
                       onAction="#shuffleQuestions"/>
               
               <Button fx:id="closeBtn" 
                       text="✕" 
                       styleClass="btn-nav"
                       prefWidth="40"
                       mnemonicParsing="false" 
                       onAction="#closeApp"/>
            </HBox>
         </HBox>
         
         <!-- Pregunta -->
         <VBox spacing="8">
            <HBox spacing="12" alignment="CENTER_LEFT">
               <Label fx:id="position" 
                      text="1." 
                      style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #5B4FFF;">
                  <font>
                     <Font size="20" />
                  </font>
               </Label>
               
               <Label fx:id="question" 
                      wrapText="true" 
                      HBox.hgrow="ALWAYS"
                      style="-fx-font-size: 18px; -fx-text-fill: #0F172A;">
                  <font>
                     <Font size="18" />
                  </font>
               </Label>
            </HBox>
         </VBox>
         
         <!-- ScrollPane para código (inicialmente oculto) -->
         <ScrollPane fx:id="scrollPaneId" 
                    visible="false"
                    managed="false"
                    prefHeight="300.0" 
                    fitToWidth="true"
                    style="-fx-background-color: transparent;">
            <content>
               <AnchorPane fx:id="codePane" 
                          style="-fx-background-color: #F8FAFC; -fx-padding: 16;"/>
            </content>
         </ScrollPane>
         
         <!-- Opciones de respuesta -->
         <VBox spacing="12" VBox.vgrow="ALWAYS">
            <Button fx:id="opt1" 
                    styleClass="option-button"
                    prefHeight="90.0" 
                    maxWidth="Infinity"
                    wrapText="true"
                    alignment="CENTER_LEFT"
                    mnemonicParsing="false" 
                    onAction="#optionClicked">
               <font>
                  <Font size="15" />
               </font>
            </Button>
            
            <Button fx:id="opt2" 
                    styleClass="option-button"
                    prefHeight="90.0" 
                    maxWidth="Infinity"
                    wrapText="true"
                    alignment="CENTER_LEFT"
                    mnemonicParsing="false" 
                    onAction="#optionClicked">
               <font>
                  <Font size="15" />
               </font>
            </Button>
            
            <Button fx:id="opt3" 
                    styleClass="option-button"
                    prefHeight="90.0" 
                    maxWidth="Infinity"
                    wrapText="true"
                    alignment="CENTER_LEFT"
                    mnemonicParsing="false" 
                    onAction="#optionClicked">
               <font>
                  <Font size="15" />
               </font>
            </Button>
            
            <Button fx:id="opt4" 
                    styleClass="option-button"
                    prefHeight="90.0" 
                    maxWidth="Infinity"
                    wrapText="true"
                    alignment="CENTER_LEFT"
                    mnemonicParsing="false" 
                    onAction="#optionClicked">
               <font>
                  <Font size="15" />
               </font>
            </Button>
         </VBox>
         
         <!-- Footer: Botones de navegación -->
         <HBox spacing="16" alignment="CENTER">
            <padding>
               <Insets top="8"/>
            </padding>
            
            <Button fx:id="menuBtn" 
                    text="← Menú" 
                    styleClass="btn-nav"
                    mnemonicParsing="false" 
                    onAction="#goToMenu"/>
            
            <Button fx:id="btnAtras" 
                    text="← Anterior" 
                    styleClass="btn-nav"
                    mnemonicParsing="false" 
                    onAction="#goPreviousQuestion"/>
            
            <Button fx:id="btnSiguiente" 
                    text="Siguiente →" 
                    styleClass="btn-primary"
                    prefWidth="140"
                    mnemonicParsing="false" 
                    onAction="#goNextQuestion"/>
            
            <Button fx:id="terminarBtn" 
                    text="✓ Terminar Quiz" 
                    styleClass="btn-finish"
                    prefWidth="150"
                    mnemonicParsing="false" 
                    onAction="#finishQuiz"/>
         </HBox>
         
      </VBox>
   </children>
</AnchorPane>